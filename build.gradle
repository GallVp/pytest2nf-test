/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
  id 'java'
  id 'application'
  id 'antlr'
  id 'org.jetbrains.kotlin.jvm'
}

group = 'io.github.gallvp'
version = '0.0.1'
description = 'pytest2nf-test: Converts a Nextflow component pytest to nf-test'

repositories {
  mavenCentral()
}

dependencies {
  antlr 'org.antlr:antlr4:4.9.2'
  implementation 'org.antlr:antlr4-runtime:4.9.2'
  implementation 'org.apache.groovy:groovy:4.0.24'
  implementation 'org.slf4j:slf4j-api:2.0.16'
  implementation 'ch.qos.logback:logback-classic:1.5.16'
  implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'
  implementation 'org.yaml:snakeyaml:2.2'
  testImplementation 'org.jetbrains.kotlin:kotlin-test'
}

application {
  mainClass = 'io.github.gallvp.converter.TestConverter'
}

generateGrammarSource {
  outputDirectory = file("${projectDir}/src/main/java/nextflow/script/parser")
}

kotlin {
  jvmToolchain(17)
}

compileKotlin {
  dependsOn(generateGrammarSource)
}

compileTestKotlin {
  dependsOn(generateTestGrammarSource)
}

test {
  useJUnitPlatform()
}
